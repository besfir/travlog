import{_ as B,m as gt,g as M,h as S,i as _t,j as ht,k as mt,l as z,n as ft,q as yt,o as l,c as _,r as bt,d as L,t as h,s as xt,a as n,v as x,w as A,e as P,x as R,y as Z,z as tt,A as s,F as E,B as I,b as g,C as T,D as vt,E as Q,G as et,H as kt,I as wt,J as $t,K as G,L as Ct,M as Y,N as D,O as At,P as St,Q as Ot,R as jt,S as Et,u as Ut,T as Lt,U as W,V as zt,W as It,X as Rt,Y as Bt,Z as Dt}from"./entry.D4goAMF7.js";import Tt from"./ContentRenderer.q3Jnk0T8.js";import{P as Nt,S as Mt,E as Pt,C as Qt,g as qt,_ as Ft}from"./ShareNInteraction.vue.KA0ie4ZZ.js";import{f as Kt}from"./useDB.CvZ22Flo.js";import"./ContentRendererMarkdown.vue.D2XBWIXt.js";import"./index.BsYmvPZw.js";import"./preview.DX9gs4Kl.js";import"./_commonjsHelpers.BosuxZz1.js";import"./config-generator.CU994Y-X.js";import"./query.BvSO6Vfk.js";const Ht={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{size:"sm",variant:"solid",color:"primary"}},C=gt(M.ui.strategy,M.ui.badge,Ht),Vt=S({inheritAttrs:!1,props:{size:{type:String,default:()=>C.default.size,validator(t){return Object.keys(C.size).includes(t)}},color:{type:String,default:()=>C.default.color,validator(t){return[...M.ui.colors,...Object.keys(C.color)].includes(t)}},variant:{type:String,default:()=>C.default.variant,validator(t){return[...Object.keys(C.variant),...Object.values(C.color).flatMap(e=>Object.keys(e))].includes(t)}},label:{type:[String,Number],default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:e,attrs:o}=_t("badge",ht(t,"ui"),C),{size:a,rounded:r}=mt({ui:e,props:t}),d=z(()=>{var p,i;const c=((i=(p=e.value.color)==null?void 0:p[t.color])==null?void 0:i[t.variant])||e.value.variant[t.variant];return ft(yt(e.value.base,e.value.font,r.value,e.value.size[a.value],c==null?void 0:c.replaceAll("{color}",t.color)),t.class)});return{attrs:o,badgeClass:d}}});function Gt(t,e,o,a,r,d){return l(),_("span",xt({class:t.badgeClass},t.attrs),[bt(t.$slots,"default",{},()=>[L(h(t.label),1)])],16)}const Yt=B(Vt,[["render",Gt]]),Wt=S({__name:"SeriesLink",props:{to:{},index:{},title:{},isAnchor:{type:Boolean}},setup(t){const{to:e,isAnchor:o,title:a,index:r}=t;return(d,c)=>{const p=P;return o?(l(),_("a",{key:0,href:e,class:"text-sm md:text-base !leading-7 group inline-flex dark:text-slate-400"},[n("span",{class:"mr-3 border border-slate-200/60 dark:border-slate-600/80 bg-gradient-to-tl from-slate-50 to-slate-200 dark:from-slate-800 dark:to-slate-600 rounded-full rounded-tl-none h-7 w-7 flex items-center justify-center"},h(r)),n("span",{class:"truncate flex-1 group-hover:underline decoration-dotted underline-offset-2"},h(a))])):(l(),x(p,{key:1,to:e,class:"text-sm md:text-base !leading-7 group inline-flex dark:text-slate-400","active-class":"!text-primary font-semibold"},{default:A(()=>[n("span",{class:"mr-3 border border-slate-200/60 dark:border-slate-600/80 bg-gradient-to-tl from-slate-50 to-slate-200 dark:from-slate-800 dark:to-slate-600 rounded-full rounded-tl-none h-7 w-7 flex items-center justify-center"},h(r)),n("span",{class:"truncate flex-1 group-hover:underline decoration-dotted underline-offset-2"},h(a))]),_:1}))}}}),Jt={class:"mb-5 md:mb-6"},Xt={class:"p-6 bg-slate-50 dark:bg-slate-800 relative rounded-2xl"},Zt={class:"text-lg md:text-2xl mb-6 font-bold text-slate-600 dark:text-slate-300 pr-4"},te={class:"flex flex-col gap-y-1 md:gap-y-2"},ee={class:"absolute right-2.5 -top-1 drop-shadow-lg"},se={class:"polygon"},ae=S({__name:"SeriesList",props:{items:{},title:{}},setup(t){const e=t,o=R(!1),a=e.items.map(({title:i,_path:m},f)=>({_path:m,idx:f+1,title:i.slice(i.indexOf("] ")+1)})),r=Z(),d=tt(),p=!!e.items.slice(2,-2).find(i=>r.path.includes(i._path));return(i,m)=>{const f=Wt,v=Q;return l(),_("section",Jt,[n("div",Xt,[n("div",Zt,h(i.title),1),n("div",te,[i.items.length>5&&!s(o)?(l(),_(E,{key:0},[(l(!0),_(E,null,I(s(a).slice(0,2),u=>(l(),x(f,{key:u.title,to:s(d)(u._path),index:u.idx,title:u.title},null,8,["to","index","title"]))),128)),g(f,{"is-anchor":"",to:"#",index:"...",title:`${i.items.length-4} ${i.$t("page.blog.series.moreParts")}`,class:T({"!text-primary font-bold":p}),onClick:m[0]||(m[0]=vt(u=>o.value=!0,["prevent"]))},null,8,["title","class"]),(l(!0),_(E,null,I(s(a).slice(-2),u=>(l(),x(f,{key:u.title,to:s(d)(u._path),index:u.idx,title:u.title},null,8,["to","index","title"]))),128))],64)):(l(!0),_(E,{key:1},I(s(a),u=>(l(),x(f,{key:u.title,to:s(d)(u._path),index:u.idx,title:u.title},null,8,["to","index","title"]))),128))]),n("div",ee,[n("div",se,[g(v,{name:"mdi:star",size:"24"})])])])])}}}),ne={class:"rounded-md p-6 mb-8 box-border bg-slate-50 dark:bg-slate-800 dark:text-slate-300"},oe={class:"flex items-center justify-between text-overflow-hidden text-sm pb-2 mb-4 border-b border-slate-300 dark:border-slate-500"},ie={class:"text-base"},le={class:"flex flex-col gap-y-1 text-slate-600 dark:text-slate-400 text-sm"},re=["href"],de={class:"text-ellipsis overflow-hidden whitespace-nowrap"},ce=S({__name:"TableOfContents",props:{links:{}},setup(t){const e=o=>{if(o-2===1)return"pl-4 [&_span]:before:content-['-_']"};return(o,a)=>{const r=Q;return l(),_("div",ne,[n("strong",oe,[n("span",ie,h(o.$t("page.blog.toc")),1),g(r,{name:"fa6-solid:bars"})]),n("ul",le,[(l(!0),_(E,null,I(o.links,d=>(l(),_("li",{key:d.id,class:T(e(d.depth))},[n("a",{class:"flex justify-between items-center hover:underline decoration-dotted underline-offset-2 hover:font-medium py-1",href:`#${d.id}`},[n("span",de,h(d.text),1),g(r,{name:"fa6-solid:arrow-right",size:"11",class:"ml-1"})],8,re)],2))),128))])])}}});function ue(t){const e=et().public.googleAdsense,o=kt(t,e),a=o.adClient??o.id,r=o.test?"on":null,d=Math.random(),c=wt(),p=R(""),i=R(!1),m=z(()=>i.value?`page-${Math.random()}`:null),f=z(()=>{var b;return((b=c.value)==null?void 0:b.getAttribute("data-ad-status"))==="unfilled"}),v=J("path"),u=J("query"),O=z(()=>i.value?null:"");async function k(){i.value=!1,await Y(),w()}async function w(){var b;if(i.value=!0,await Y(),!((b=c.value)!=null&&b.innerHTML))try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch($){console.error($)}}return $t([v,u],(b,$)=>{const y=pe(b,$,o.includeQuery);c.value&&!c.value.isConnected||y&&k()}),G(()=>{!c.value||!c.value.isConnected||(i.value?c.value.innerHTML="":c.value.innerHTML=" ")}),o.hideUnfilled&&G(()=>f.value&&(p.value="hide-unfilled")),Ct(()=>w()),{adClass:p,dataAdClient:a,dataAdRegion:m,dataAdTest:r,dataAnalyticsDomainName:o.analyticsDomainName,dataAnalyticsUacct:o.analyticsUacct,isUnfilled:f,key:d,status:O,updateAd:k,showAd:w}}function J(t){const e=Z();return z(()=>e[t])}function pe(t,e,o){const[a,r]=t,[d,c]=e;if(a!==d)return!0;if(!o)return;const p=Object.keys(r),i=Object.keys(c);return p.length!==i.length||p.some(m=>r[m]!==c[m])}const ge=["data-ad-client","data-ad-slot","data-ad-format","data-ad-region","data-ad-layout","data-ad-layout-key","data-page-url","data-analytics-uacct","data-analytics-domain-name","data-adtest","data-adsbygoogle-status","data-ad-full-width-responsive"],_e=S({__name:"Adsbygoogle",props:{adClient:{default:void 0},adSlot:{default:null},adFormat:{},adLayout:{default:null},adLayoutKey:{default:null},adStyle:{default:()=>({display:"block"})},adFullWidthResponsive:{type:Boolean,default:!1},hideUnfilled:{type:Boolean,default:void 0},pageUrl:{default:null},analyticsUacct:{},analyticsDomainName:{},includeQuery:{type:Boolean}},setup(t,{expose:e}){const{adClient:o,analyticsDomainName:a,analyticsUacct:r,hideUnfilled:d,includeQuery:c}=t,{adClass:p,dataAdClient:i,dataAdRegion:m,dataAdTest:f,dataAnalyticsDomainName:v,dataAnalyticsUacct:u,isUnfilled:O,key:k,status:w,updateAd:b,showAd:$}=ue({adClient:o,analyticsDomainName:a,analyticsUacct:r,hideUnfilled:d,includeQuery:c});return e({isUnfilled:O,updateAd:b,showAd:$}),(y,N)=>(l(),_("ins",{ref:"ad",key:s(k),class:T(["adsbygoogle",s(p)]),style:D(y.adStyle),"data-ad-client":s(i),"data-ad-slot":y.adSlot,"data-ad-format":y.adFormat,"data-ad-region":s(m),"data-ad-layout":y.adLayout,"data-ad-layout-key":y.adLayoutKey,"data-page-url":y.pageUrl,"data-analytics-uacct":s(u),"data-analytics-domain-name":s(v),"data-adtest":s(f),"data-adsbygoogle-status":s(w),"data-ad-full-width-responsive":y.adFullWidthResponsive},null,14,ge))}}),st=B(_e,[["__scopeId","data-v-c59cd125"]]),he={},me={class:"b-ads"};function fe(t,e){const o=st;return l(),_("div",me,[g(o,{"ad-full-width-responsive":!0,"ad-format":"auto"})])}const ye=B(he,[["render",fe],["__scopeId","data-v-8b0e34b5"]]),be={class:"surround-link__icon"},xe={class:"surround-link__title"},ve={class:"surround-link__description"},ke=S({__name:"SurroundCard",props:{path:{},title:{},description:{},right:{type:Boolean}},setup(t){return(e,o)=>{const a=Q,r=P;return l(),x(r,{to:e.path,class:T(["surround-link group",{right:e.right}])},{default:A(()=>[n("div",be,[g(a,{name:e.right?"i-heroicons-arrow-right-16-solid":"heroicons:arrow-left-16-solid",dynamic:""},null,8,["name"])]),n("p",xe,h(e.title),1),n("p",ve,h(e.description),1)]),_:1},8,["to","class"])}}}),we=B(ke,[["__scopeId","data-v-a104e453"]]),$e={props:{shortname:String,pageConfig:{type:Object,validator:t=>Object.keys(t).every(e=>Nt.includes(e))},ssoConfig:{type:Object,validator:t=>Object.keys(t).every(e=>Mt.includes(e))},lang:{type:String,default:"en"},lazy:{type:Boolean,default:!0},lazyConfig:{type:Object,default:()=>({root:null,rootMargin:"300px",threshold:.5})}},data:()=>({observer:null,colorScheme:At().value}),computed:{getShortname(){const t=this.shortname?this.shortname:this.$disqus?this.$disqus.shortname:null;if(!t)throw new Error(Pt);return t}},watch:{lang(){this.reset()}},mounted(){if(this.lazy)return this.observerDisqus();this.init()},methods:{init(){if(this.$disqus&&(this.$disqus.reset=this.reset),window.DISQUS)return this.reset();const t=this.setBaseConfig;window.disqus_config=function(){t(this)},this.loadEmbedScript(),this.$route&&this.$watch("$route.path",()=>this.reset())},reset(t=window.DISQUS){const e=this.setBaseConfig;t==null||t.reset({reload:!0,config:function(){e(this)}})},observerDisqus(){if("IntersectionObserver"in window)return this.observer=new IntersectionObserver(this.handleObserver,this.lazyConfig),this.observer.observe(this.$el);this.init()},handleObserver(t){t.forEach(e=>{e.isIntersecting&&(this.observer.disconnect(),this.init())})},loadEmbedScript(){const t=document,e=t.createElement("script");e.setAttribute("id","embed-disqus"),e.setAttribute("data-timestamp",+new Date),e.type="text/javascript",e.async=!0,e.src=`//${this.getShortname}.disqus.com/embed.js`,(t.head||t.body).appendChild(e)},setBaseConfig(t){this.setPageConfig(t),this.cbDisqus(t),this.ssoConfig&&Object.keys(this.ssoConfig).length&&Object.assign(t.sso,this.ssoConfig),t.language=this.lang},setPageConfig(t){const e={url:document.baseURI,identifier:this.$route?this.$route.path:window.location.pathname};Object.assign(t.page,e),this.pageConfig&&Object.keys(this.pageConfig).length&&Object.assign(t.page,this.pageConfig)},cbDisqus(t){Qt.forEach(e=>{t.callbacks[e]=[o=>{this.$emit(qt(e),o)}]})}}};function Ce(t,e,o,a,r,d){return l(),_("div",{id:"disqus_thread",style:D([{"min-height":"200px"},{"color-scheme":"none"}])})}const Ae=B($e,[["render",Ce]]);function X(){return{getFlattenLink:at}}function at(t){if(!t)throw St("TocLink[] is not founded");return t.map(e=>{let o=[e];if(e.children){const a=at(e.children);o=[e,...a]}return o}).flat(1)}const Se={class:"mx-auto max-w-2xl"},Oe={class:"mb-3 lg:mb-5 flex justify-center gap-x-1"},je={class:"flex justify-center items-center text-slate-400/80 mb-8 lg:mb-16"},Ee=n("span",{class:"mx-1"},"·",-1),Ue={key:0},Le={key:1},ze={class:"mb-8 lg:mb-16 lg:ml-[calc(50%-512px)] lg:w-[1024px]"},Ie=["src","alt"],Re={class:"relative"},Be={class:"absolute inset-y-0 -left-[calc(64px+160px+32px)] w-40 hidden xl:block"},De={class:"sticky top-28"},Te=n("div",{class:"bg-slate-50 dark:bg-transparent dark:border border-slate-700 w-16 p-2 rounded-full ml-auto flex flex-wrap justify-center"},[n("span",{class:"mb-4 font-semibold block text-center text-sm"},"35")],-1),Ne={class:"md:text-lg space-y-5 lg:space-y-6 max-w-2xl mx-auto"},Me={class:"absolute inset-y-0 -right-[calc(64px+320px+32px)] w-80 hidden slug-lg:block"},Pe={class:"sticky top-24 max-h-[calc(100vh-112px)] overflow-y-auto"},Qe={class:"max-w-40 max-h-32"},qe={class:"mt-12"},Fe={class:"mt-12 bg-slate-50 dark:bg-slate-950/80 p-4 rounded-xl text-center space-y-1 space-x-2"},Ke={class:"text-sm mb-2.5 dark:text-slate-400"},He={class:"grid gap-8 sm:grid-cols-2"},Ve={key:1,class:"hidden sm:block"},Ge={id:"comment",class:"mt-12","aria-label":"comment"},os=S({__name:"[...slug]",async setup(t){var y,N;let e,o;const{post:a,surround:r,seriesItem:d}=([e,o]=Ot(()=>Kt()),e=await e,o(),e),c=tt(),[p,i]=r.value,m=X().getFlattenLink((y=a.value.body.toc)==null?void 0:y.links);X().getFlattenLink((N=a.value.body.toc)==null?void 0:N.links);const v=jt()(a.value.cover,{width:1024,height:647,quality:100});a.value._path;const u=a.value.description;a.value.title;const O=Et().url+v;Ut({meta:[{name:"description",content:u},{property:"og:image",content:O},{property:"og:image:height",content:647},{property:"og:image:width",content:1024},{name:"twitter:image",content:O},{name:"twitter:image:height",content:647},{name:"twitter:image:width",content:1024}]});const k=R(!1),w=R(),{DISQUS:b}=et().public.KEY_STATE;Lt(b,()=>w);const{resolveViewTransitionNameStyle:$}=It();return(j,q)=>{const nt=Yt,ot=P,it=ae,lt=ce,F=st,K=ye,rt=Tt,dt=Ft,H=Rt,ct=Bt,V=we,ut=Ae,pt=Dt;return l(),_("section",Se,[n("header",null,[n("div",Oe,[(l(!0),_(E,null,I(s(a).tags,U=>(l(),x(ot,{key:U,to:s(c)(`/blog/tags/${U}/page/1`)},{default:A(()=>[g(nt,{variant:"soft",size:"lg"},{default:A(()=>[L(" #"+h(U),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),n("h1",{class:"font-extrabold text-[28px] lg:text-[45px] leading-tight text-center text-slate-900 dark:text-slate-200 mb-5 lg:mb-[22.5px] break-words",style:D([s($)(s(a)._path,"title")])},h(s(a).title),5),n("div",je,[L(" Besfir "),Ee,s(a).updatedAt?(l(),_("span",Ue,h(j.$t("page.blog.slug.updatedAt",{date:j.$d(s(a).updatedAt,{key:"short"})})),1)):(l(),_("span",Le,h(j.$t("page.blog.slug.createdAt",{date:j.$d(s(a).createdAt,{key:"short"})})),1))]),n("div",ze,[n("img",{style:D([s($)(s(a)._path,"cover")]),class:"rounded-3xl w-full bg-slate-100 dark:bg-slate-950/50",height:"647",width:"1024",src:s(v),alt:s(a).title+" cover"},null,12,Ie)]),s(a).series?(l(),x(it,{key:0,title:s(a).series,items:s(d)},null,8,["title","items"])):W("",!0),g(lt,{links:s(m)},null,8,["links"])]),n("article",Re,[n("div",Be,[n("div",De,[Te,g(F)])]),n("div",Ne,[g(K),g(rt,{value:s(a),class:"b-prose"},null,8,["value"]),g(K)]),n("div",Me,[n("div",Pe,[n("div",Qe,[g(F)])])])]),n("footer",qe,[g(dt,{"is-liked":s(k),"onUpdate:isLiked":q[0]||(q[0]=U=>zt(k)?k.value=U:null),"post-title":s(a).title,"post-path":s(a)._path,"post-tags":s(a).tags},null,8,["is-liked","post-title","post-path","post-tags"]),n("div",Fe,[n("div",Ke,h(j.$t("page.blog.donation")),1),g(H,{"leading-icon":"i-besfir-ko-fi",size:"lg",to:"https://ko-fi.com/besfir/?hidefeed=true&widget=true&embed=true",target:"_blank",ui:{padding:{lg:"px-3 py-0.5"},icon:{size:{lg:"w-8 h-8"}}},variant:"outline"},{default:A(()=>[L(" Ko-fi ")]),_:1}),g(H,{"leading-icon":"i-besfir-toss",size:"lg",to:"https://toss.me/besfir",target:"_blank",ui:{padding:{lg:"px-3 py-0.5"},icon:{size:{lg:"w-8 h-8"}}},variant:"outline"},{default:A(()=>[L(" Toss ")]),_:1})]),g(ct,{class:"my-12"}),n("div",He,[s(p)?(l(),x(V,{key:0,title:s(p).title,path:s(p)._path,description:s(p).description},null,8,["title","path","description"])):(l(),_("span",Ve)),s(i)?(l(),x(V,{key:2,title:s(i).title,path:s(i)._path,description:s(i).description,right:""},null,8,["title","path","description"])):W("",!0)]),n("div",Ge,[g(pt,null,{default:A(()=>[g(ut,{ref_key:"disqusEl",ref:w,lang:j.$i18n.locale,"page-config":{identifier:s(a)._path},shortname:"besfir"},null,8,["lang","page-config"])]),_:1})])])])}}});export{os as default};
